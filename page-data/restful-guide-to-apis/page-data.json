{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/restful-guide-to-apis/","result":{"data":{"site":{"siteMetadata":{"title":"Matt Shelley"}},"markdownRemark":{"id":"10d9d689-515a-5533-9a8e-39e16f234891","excerpt":"Jumping into back-end from front-end (or vice versa) can be intimidating. Sure, both sides are just code in the end, but the technology and practices are…","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.89189189189189%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQCAwX/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAVo6FeCI2J//xAAZEAACAwEAAAAAAAAAAAAAAAAAAgEDFBL/2gAIAQEAAQUCaqxzMxnYgljo/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQMBAT8BiP/EABcRAQADAAAAAAAAAAAAAAAAAAAREkH/2gAIAQIBAT8BnFn/xAAXEAADAQAAAAAAAAAAAAAAAAAQICEx/9oACAEBAAY/AqmD/8QAGhAAAwEAAwAAAAAAAAAAAAAAAAERITFBUf/aAAgBAQABPyFzYouyPBg+cHgihTP/2gAMAwEAAgADAAAAEPTv/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAEhEf/aAAgBAwEBPxC6zB//xAAWEQEBAQAAAAAAAAAAAAAAAAABERD/2gAIAQIBAT8QkYz/AP/EABwQAQEBAAIDAQAAAAAAAAAAAAERACExQVFhgf/aAAgBAQABPxAY8CBSGILzII9OMyD+mHuHIKBfHnKr643/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Fox lying down\"\n        title=\"Fox lying down\"\n        src=\"/static/f45c1f83d753e39bd0a4aeb6461220c3/1c72d/cover.jpg\"\n        srcset=\"/static/f45c1f83d753e39bd0a4aeb6461220c3/a80bd/cover.jpg 148w,\n/static/f45c1f83d753e39bd0a4aeb6461220c3/1c91a/cover.jpg 295w,\n/static/f45c1f83d753e39bd0a4aeb6461220c3/1c72d/cover.jpg 590w,\n/static/f45c1f83d753e39bd0a4aeb6461220c3/a8a14/cover.jpg 885w,\n/static/f45c1f83d753e39bd0a4aeb6461220c3/a2510/cover.jpg 1000w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p style='text-align: center'>\n  <small>\n  Photo credit: <a href='https://unsplash.com/@obkim'>Qijin Xu @obkim via Unsplash</a>\n  </small>\n</p>\n<p>Jumping into back-end from front-end (or vice versa) can be intimidating. Sure, both sides are just code in the end, but the technology and practices are different. With back-end, we manage data. With front-end, we manage user experience. But, in between them lies a bridge: the API.</p>\n<p>When we write better APIs, we improve our teamwork and our applications.</p>\n<h2>What’s an API?</h2>\n<p>On the web, an API (Application Programming Interface) is how the front-end (client) communicates with the back-end (server).</p>\n<p>For example, the client may want to display a list of products in a catalogue. So, the client asks the server which products are available. Then, the server answers with the list of products.</p>\n<p>On the front-end, we send a <strong>request</strong>. On the back-end, we send a <strong>response</strong>.</p>\n<p>This exchange is performed through an API.</p>\n<h2>CRUD</h2>\n<p>With resources, we have four actions: <strong>C</strong>reate, <strong>R</strong>ead, <strong>U</strong>pdate, and <strong>D</strong>elete.</p>\n<p>Consider a collection of products:</p>\n<table>\n<thead>\n<tr>\n<th>Action</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>Create</strong></td>\n<td>Add a product</td>\n</tr>\n<tr>\n<td><strong>Read</strong></td>\n<td>Get the details of a product</td>\n</tr>\n<tr>\n<td><strong>Update</strong></td>\n<td>Change a product</td>\n</tr>\n<tr>\n<td><strong>Delete</strong></td>\n<td>Remove a product</td>\n</tr>\n</tbody>\n</table>\n<p>We can perform these actions on resources through an API.</p>\n<h2>RESTful APIs</h2>\n<p>RESTful APIs are one approach to communicating CRUD actions between the client and the server.</p>\n<p>REST (Representational State Transfer) refers to <a href=\"https://en.wikipedia.org/wiki/Representational_state_transfer#Architectural_constraints\">architectural constraints</a> for web services. However, web APIs may not fulfill all of those constraints, so instead are called REST<em>ful</em>.</p>\n<p>With RESTful APIs, we use HTTP methods to create, read, update, and delete resources given a <a href=\"https://en.wikipedia.org/wiki/Clean_URL\">clean URL</a> and a URI (Unique Resource Identifier), like an id (42) or slug (towel).</p>\n<p>Specifically, HTTP supports <strong>GET</strong>, <strong>POST</strong>, <strong>PATCH</strong>, <strong>PUT</strong>, and <strong>DELETE</strong> methods.</p>\n<p>With a resource:</p>\n<table>\n<thead>\n<tr>\n<th>Method</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>GET</strong></td>\n<td>Retrieve resource</td>\n</tr>\n<tr>\n<td><strong>POST</strong></td>\n<td>Create a new “sub-resource,” and return its URI</td>\n</tr>\n<tr>\n<td><strong>PATCH</strong></td>\n<td>Update resource with given instructions</td>\n</tr>\n<tr>\n<td><strong>PUT</strong></td>\n<td>Replace resource</td>\n</tr>\n<tr>\n<td><strong>DELETE</strong></td>\n<td>Delete resource</td>\n</tr>\n</tbody>\n</table>\n<p>With a collection of resources:</p>\n<table>\n<thead>\n<tr>\n<th>Method</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>GET</strong></td>\n<td>Retrieve all resources</td>\n</tr>\n<tr>\n<td><strong>POST</strong></td>\n<td>Create a new resource, and return its URI</td>\n</tr>\n<tr>\n<td><strong>PATCH</strong></td>\n<td>Update all resources with given instructions</td>\n</tr>\n<tr>\n<td><strong>PUT</strong></td>\n<td>Replace all resources</td>\n</tr>\n<tr>\n<td><strong>DELETE</strong></td>\n<td>Delete all resources</td>\n</tr>\n</tbody>\n</table>\n<p>RESTful APIs support CRUD actions on collections and resources.</p>\n<h2>JSON:API</h2>\n<p>There is no standard format for requests, responses, and errors in RESTful APIs. However, I personally like to use <a href=\"https://jsonapi.org/\">JSON:API</a> for most of my projects.</p>\n<p>Each <strong>request</strong> includes an HTTP method, URL, and sometimes instructions.</p>\n<p>Each <strong>response</strong> returns an HTTP status code and a JSON object with either <code class=\"language-text\">data</code> or <code class=\"language-text\">error</code> - but never both. Optionally, responses may return a <code class=\"language-text\">meta</code> object to tell us more about the data, such as pagination.</p>\n<p>Let’s see how to create, read, update, and delete from our products collection.</p>\n<p><em>(These examples will not cover every possible situation. For thorough details, please refer to the <a href=\"https://jsonapi.org/format/\">JSON:API specification</a>.)</em></p>\n<h3>GET</h3>\n<p>To request all products:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">GET https<span class=\"token operator\">:</span><span class=\"token comment\">//api.example.com/products</span></code></pre></div>\n<p>To respond, we return an array of products:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token number\">200</span> OK\n\n<span class=\"token punctuation\">{</span>\n  data<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n    type<span class=\"token operator\">:</span> <span class=\"token string\">\"products\"</span><span class=\"token punctuation\">,</span>\n    id<span class=\"token operator\">:</span> <span class=\"token string\">\"toaster\"</span><span class=\"token punctuation\">,</span>\n    attributes<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      name<span class=\"token operator\">:</span> <span class=\"token string\">\"Toaster\"</span><span class=\"token punctuation\">,</span>\n      price<span class=\"token operator\">:</span> <span class=\"token number\">29.99</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    type<span class=\"token operator\">:</span> <span class=\"token string\">\"products\"</span><span class=\"token punctuation\">,</span>\n    id<span class=\"token operator\">:</span> <span class=\"token string\">\"alarm-clock\"</span><span class=\"token punctuation\">,</span>\n    attributes<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      name<span class=\"token operator\">:</span> <span class=\"token string\">\"Alarm Clock\"</span><span class=\"token punctuation\">,</span>\n      price<span class=\"token operator\">:</span> <span class=\"token number\">15.99</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>If there are no products, we respond with an empty array:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token number\">200</span> OK\n\n<span class=\"token punctuation\">{</span>\n  data<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>To request a specific product:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">GET https<span class=\"token operator\">:</span><span class=\"token comment\">//api.example.com/products/toaster</span></code></pre></div>\n<p>To respond, we return the product:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token number\">200</span> OK\n\n<span class=\"token punctuation\">{</span>\n  data<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    type<span class=\"token operator\">:</span> <span class=\"token string\">\"products\"</span><span class=\"token punctuation\">,</span>\n    id<span class=\"token operator\">:</span> <span class=\"token string\">\"toaster\"</span><span class=\"token punctuation\">,</span>\n    attributes<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      name<span class=\"token operator\">:</span> <span class=\"token string\">\"Toaster\"</span><span class=\"token punctuation\">,</span>\n      price<span class=\"token operator\">:</span> <span class=\"token number\">29.99</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>If we cannot find the product, we respond with an error:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token number\">404</span> Not Found\n\n<span class=\"token punctuation\">{</span>\n  errors<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n    status<span class=\"token operator\">:</span> <span class=\"token string\">\"404\"</span><span class=\"token punctuation\">,</span>\n    detail<span class=\"token operator\">:</span> <span class=\"token string\">\"The requested product could not be found.\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Further, we can sort, filter, and paginate by providing a <strong>query</strong>:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">GET https<span class=\"token operator\">:</span><span class=\"token comment\">//api.example.com/products?sort=price&amp;filter=0,100&amp;page=5</span></code></pre></div>\n<h3>POST</h3>\n<p>To request the creation of a product:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">POST https<span class=\"token operator\">:</span><span class=\"token comment\">//api.example.com/products</span>\n\n<span class=\"token punctuation\">{</span>\n  data<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    type<span class=\"token operator\">:</span> <span class=\"token string\">\"products\"</span><span class=\"token punctuation\">,</span>\n    attributes<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      name<span class=\"token operator\">:</span> <span class=\"token string\">\"Frying Pan\"</span><span class=\"token punctuation\">,</span>\n      price<span class=\"token operator\">:</span> <span class=\"token number\">19.99</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>To respond, we return the new product with its <strong>id</strong>:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token number\">201</span> Created\n\n<span class=\"token punctuation\">{</span>\n  data<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    type<span class=\"token operator\">:</span> <span class=\"token string\">\"products\"</span><span class=\"token punctuation\">,</span>\n    id<span class=\"token operator\">:</span> <span class=\"token string\">\"frying-pan\"</span><span class=\"token punctuation\">,</span>\n    attributes<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      name<span class=\"token operator\">:</span> <span class=\"token string\">\"Frying Pan\"</span><span class=\"token punctuation\">,</span>\n      price<span class=\"token operator\">:</span> <span class=\"token number\">19.99</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>If we cannot create the product, we respond with an error:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token number\">403</span> Forbidden\n\n<span class=\"token punctuation\">{</span>\n  errors<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n    status<span class=\"token operator\">:</span> <span class=\"token string\">\"403\"</span><span class=\"token punctuation\">,</span>\n    detail<span class=\"token operator\">:</span> <span class=\"token string\">\"You do not have permission to create a product.\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>PATCH</h3>\n<p>To request updates to a product, we send the updated values and leave out the ones we do not want to change:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">PATCH https<span class=\"token operator\">:</span><span class=\"token comment\">//api.example.com/products</span>\n\n<span class=\"token punctuation\">{</span>\n  data<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    type<span class=\"token operator\">:</span> <span class=\"token string\">\"products\"</span><span class=\"token punctuation\">,</span>\n    id<span class=\"token operator\">:</span> <span class=\"token string\">\"toaster\"</span><span class=\"token punctuation\">,</span>\n    attributes<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      description<span class=\"token operator\">:</span> <span class=\"token string\">\"This product has a new description\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>To respond, we return the updated product:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token number\">200</span> OK\n\n<span class=\"token punctuation\">{</span>\n  data<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    type<span class=\"token operator\">:</span> <span class=\"token string\">\"products\"</span><span class=\"token punctuation\">,</span>\n    id<span class=\"token operator\">:</span> <span class=\"token string\">\"toaster\"</span><span class=\"token punctuation\">,</span>\n    attributes<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      name<span class=\"token operator\">:</span> <span class=\"token string\">\"Toaster\"</span><span class=\"token punctuation\">,</span>\n      price<span class=\"token operator\">:</span> <span class=\"token number\">29.99</span><span class=\"token punctuation\">,</span>\n      description<span class=\"token operator\">:</span> <span class=\"token string\">\"This product has a new description\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>If we cannot update the product, we respond with an error:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token number\">403</span> Forbidden\n\n<span class=\"token punctuation\">{</span>\n  errors<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n    status<span class=\"token operator\">:</span> <span class=\"token string\">\"403\"</span><span class=\"token punctuation\">,</span>\n    detail<span class=\"token operator\">:</span> <span class=\"token string\">\"You do not have permission to update this product.\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>PUT</h3>\n<p><strong>PUT</strong> is not supported by JSON:API. However, we can mimic <strong>PUT</strong> by providing all attributes to <strong>PATCH</strong>.</p>\n<h3>DELETE</h3>\n<p>To delete a product:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">DELETE https<span class=\"token operator\">:</span><span class=\"token comment\">//api.example.com/products/toaster</span></code></pre></div>\n<p>To respond, we simply confirm with no content:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token number\">204</span> No Content</code></pre></div>\n<p>If we cannot delete the product, we respond with an error:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token number\">403</span> Forbidden\n\n<span class=\"token punctuation\">{</span>\n  errors<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n    status<span class=\"token operator\">:</span> <span class=\"token string\">\"403\"</span><span class=\"token punctuation\">,</span>\n    detail<span class=\"token operator\">:</span> <span class=\"token string\">\"You do not have permission to delete this product.\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>Error Handling</h3>\n<p>When an error occurs, we respond with the HTTP status code and an array of errors containing <code class=\"language-text\">status</code>, <code class=\"language-text\">details</code>, and <a href=\"https://jsonapi.org/format/#error-objects\">other attributes</a>.</p>\n<h2>Final Thoughts</h2>\n<p>As developers, we often place ourselves on either the front-end or back-end. It is very easy to stick to the side we prefer, where we are comfortable, but as a result we limit our breadth of skills. Learning to build RESTful APIs is a great opportunity to expand our skills to the other side.</p>\n<p>Ultimately, writing better APIs improves our teamwork and our applications.</p>\n<h2>Further Reading</h2>\n<ul>\n<li><a href=\"https://hackernoon.com/restful-api-design-step-by-step-guide-2f2c9f9fcdbf\">RESTful API Design - Step by Step Guide</a></li>\n<li><a href=\"https://medium.com/backticks-tildes/restful-api-design-put-vs-patch-4a061aa3ed0b\">RESTful API Design - Put vs PATCH</a></li>\n<li><a href=\"https://jsonapi.org/format/\">JSON:API specification</a></li>\n</ul>","frontmatter":{"title":"A RESTful Guide to APIs","date":"February 22, 2020","description":"RESTful APIs are one approach to communicating CRUD actions between the client and the server."}}},"pageContext":{"slug":"/restful-guide-to-apis/","previous":{"fields":{"slug":"/intro-big-o-notation/"},"frontmatter":{"title":"Introducing Big O Notation"}},"next":{"fields":{"slug":"/getting-things-done/"},"frontmatter":{"title":"Applying the Getting Things Done Methodology"}}}}}